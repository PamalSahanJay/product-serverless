authorizer:
  handler: src/authorizer.handler
  environment:
    COGNITO_USERPOOL_ID: !Ref cognitoUserPool
    COGNITO_WEB_CLIENT_ID: !Ref cognitoUserPoolWebClient

createProduct:
  handler: src/handler.createProduct
  role: ${env:IAM_ROLE}
  events:
    - http:
        method: post
        path: product
        authorizer: 
          name: cognito-pool
          arn: ${env:COGNITO_POOL_ARN}

updateProduct:
  handler: src/handler.updateProduct
  role: ${env:IAM_ROLE}
  events:
    - http:
        method: put
        path: product/{id}
        authorizer:
          name: cognito-pool
          arn: ${env:COGNITO_POOL_ARN}

deleteProduct:
  handler: src/handler.deleteProduct
  role: ${env:IAM_ROLE}
  events:
    - http:
        method: delete
        path: product/{id}
        authorizer:
          name: cognito-pool
          arn: ${env:COGNITO_POOL_ARN}

getAllProducts:
  handler: src/handler.getAllProducts
  role: ${env:IAM_ROLE}
  events:
    - http:
        method: get
        path: product
        authorizer:
          name: cognito-pool
          arn: ${env:COGNITO_POOL_ARN}

getProduct:
  handler: src/handler.getProduct
  role: ${env:IAM_ROLE}
  events:
    - http:
        method: get
        path: product/{id}
        authorizer: authorizer
